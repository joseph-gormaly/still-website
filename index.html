
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const emissaryBtn = document.getElementById('emissary-btn');
            const masterBtn = document.getElementById('master-btn');
            const body = document.body;

            // Check for saved preference
            const currentMode = localStorage.getItem('viewMode') || 'emissary';
            setMode(currentMode);

            emissaryBtn.addEventListener('click', () => setMode('emissary'));
            masterBtn.addEventListener('click', () => setMode('master'));

            function setMode(mode) {
                body.setAttribute('data-view-mode', mode);
                localStorage.setItem('viewMode', mode);
                
                if (mode === 'emissary') {
                    emissaryBtn.classList.add('active');
                    masterBtn.classList.remove('active');
                } else {
                    masterBtn.classList.add('active');
                    emissaryBtn.classList.remove('active');
                }
            }
        });
    </script>
